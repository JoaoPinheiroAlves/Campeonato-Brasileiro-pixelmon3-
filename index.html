<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>üèÜ Campeonato Brasileiro de Pixelmon 3</title>
<style>
body { font-family:"Trebuchet MS",sans-serif; background:#eafaf0; color:#222; margin:0; padding:20px;}
h1{text-align:center; color:#1b5e20;text-shadow:1px 1px 3px #9acd32;}
.controls { display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-bottom:20px; }
button{background:#4caf50; color:white; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:bold; transition:0.3s;}
button:hover{background:#388e3c;}
.search-area{text-align:center; margin:20px 0;}
input[type="text"], select{padding:6px; border-radius:8px; border:1px solid #ccc; width:250px;}
table{width:100%; border-collapse:collapse; margin-bottom:40px;}
th,td{border:1px solid #aaa; padding:6px; text-align:center; font-size:14px;}
th{background-color:#2e7d32; color:white;}
tr:nth-child(even){background-color:#f7f7f7;}
tr:hover{background-color:#d7ffd9;}
.top32{background-color:#a7d7c5 !important; font-weight:bold;}
.section{margin-top:30px;}
#rodadaArea{display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:6px; margin-top:20px;}
.match-card{background-color:#2c2f33; border:2px solid #4caf50; border-radius:8px; padding:8px; color:#fff; text-align:center; font-size:12px; box-shadow:0 0 5px rgba(0,0,0,0.3);}
.match-card button{background-color:#4caf50; border:none; color:white; padding:3px 6px; margin:2px; border-radius:5px; cursor:pointer; font-size:11px;}
.match-card button:hover{background-color:#66bb6a;}
.espera{color:#999; font-style:italic; background:#f0f0f0; padding:5px; border-radius:6px;}
.resultado{margin-top:5px; font-weight:bold; color:#1b5e20; font-size:12px;}
.highlight{background-color:#fff59d !important;}
</style>
</head>
<body>
<h1>üèÜ Campeonato Brasileiro de Pixelmon 3</h1>

<div class="controls">
  <button onclick="scrollToSection('tabela')">üìã Tabela</button>
  <button onclick="scrollToSection('rodadas')">‚öîÔ∏è Rodadas</button>
  <button onclick="scrollToSection('addPlayer')">‚ûï Adicionar</button>
  <button onclick="savePoints()">üíæ Salvar Pontos</button>
  <button onclick="resetPoints()">üîÅ Reiniciar Pontos</button>
</div>

<div class="search-area">
  <h3>üîç Pesquisar na Tabela</h3>
  <input type="text" id="searchTable" placeholder="Digite o nick...">
  <button onclick="pesquisar('searchTable','tabelaBody')">Ir</button>
</div>

<div id="tabela" class="section">
  <h2>üìã Tabela de Pontua√ß√£o</h2>
  <table>
    <thead><tr><th>Class.</th><th>Nick</th><th>Pontos</th><th>Confirmar</th><th>Remover</th></tr></thead>
    <tbody id="tabelaBody"></tbody>
  </table>
</div>

<div class="search-area">
  <h3>üîç Pesquisar na Rodada</h3>
  <input type="text" id="searchRodada" placeholder="Digite o nick...">
  <button onclick="pesquisar('searchRodada','rodadaArea')">Ir</button>
</div>

<div id="rodadas" class="section">
  <h2>‚öîÔ∏è Rodada Atual</h2>
  <label>Tipo de Rodada: 
    <select id="tipoRodada">
      <option value="1">Quarta (1 ponto)</option>
      <option value="3">S√°bado (3 pontos)</option>
    </select>
  </label>
  <button onclick="sortearRodadas()">üé≤ Sortear Rodadas</button>
  <div id="rodadaArea"></div>
</div>

<div id="addPlayer" class="section">
  <h2>‚ûï Adicionar Jogador</h2>
  <input type="text" id="novoNick" placeholder="Nick do jogador">
  <select id="pontosIniciais">
    <option value="0">0 Pontos</option>
    <option value="1">1 Ponto</option>
    <option value="2">2 Pontos</option>
    <option value="3">3 Pontos</option>
    <option value="4">4 Pontos</option>
    <option value="5">5 Pontos</option>
    <option value="6">6 Pontos</option>
    <option value="7">7 Pontos</option>
    <option value="8">8 Pontos</option>
    <option value="9">9 Pontos</option>
    <option value="10">10 Pontos</option>
    <option value="11">11 Pontos</option>
  </select>
  <button onclick="adicionarJogador()">Adicionar</button>
</div>

<script>
// ===================== PADRONIZA√á√ÉO =====================
function padronizarNick(nick){ return nick.trim(); }

// ===================== DADOS INICIAIS =====================
let jogadores = {
  11:["Aoi_Happy","Gordinho0800","Maxz_HD","VT___","Yttoshirib"],
  10:["Benas2009","Itachizin_","JP_SL01","Kauansoares","MG_12YT","Mik3ymon","Niznivek","Tallercandy7892","Tokynn","Raiburn","TZPinheiro","Yangabriel2010","Giovanni_Gils","Isakzon_BR","JoaoCrazy16","Rokoraro"],
  9:["Abreuolindo","Cast","Flagon01","Deoxyss12","Gustavogc191","Guxtao","Itsrazor","LN__","Reiis124","Sou_o_a","SPK_Gustavin","Cry2trickroon","Thzinnff"],
  8:["3Papenas","Fontana Nicolas","Fortah","Johnliroliro","Stfirezin","Tutuh7","Akst_Lulu","ArthurTV22","Yuri Dinamite"],
  7:["Akirakkkk","Athaydexz","Bahzinhol","Catbreak","Coutinho140702","Haze_TS","Lczinbz","Migueltks","Misterio026","Nightzrxzs","Noah737f","Noobfra","P3ZinYT","Pedrzakk","Domingues_Apenas","RandonXD","Riparze","Tudonosso_021"],
  6:["10Tetes","Aberrantear5026","C4Duz1n_","Guonbo","PA_Craw","Papafrancis44","Pedroffranco","SR_Gomes020407","Fefezin","Guztozo","Leviathannt","Vinizin_Sla","ZNormanvivanz","Zoomflex666"],
  5:["Gabztrash444a","Medinax77","Mikey1231","Strikingofc","Rocks","Enolakal3","Kaka_191"],
  4:["1_Burny","Caslu4k","D9Zinn","Dogobr","Jorge0301","Jao_R","Luquete1223","Minattoo","Esfaqueador","Filhododuolingo","Nig3035","Ometusky","Robinson","Tots123","Vitin47"],
  3:["DHZ14x","Felpssixnine","JVGQ23","Jonhs0101","Kniyzyn","Low_Drake","Noirt4byss","Susukeyt","Tohic_Z","VHzinho2208","Viny_KS2","Wendel","Ant√¥nio11111222","Breno020212","HugooXZ_","Kauazinn_8","Rafa180394","Sandrelas","TavaresXX","Teosaleh_27"],
  2:["2Doisc","BielzinXP","Capela_","Conte_0710","Doso7490","Edublack","Henrizdx","Mineon07x","Mingauzz","MarcosPikachu","MarcosUwuy","Merkzin","OffHenry","Peubr14","Pobre144"],
  1:["1Hydrahunter","Black","Cup_Dark","136 DWF7ETC_","EnzoCS10","Eliaszkg","Henzo_Games","Ice101123","Icifuente","MCVapo456","Mktzinkkj","Mzmarcos1","Poke_PT","Pzanoni","Pretukkk","Raise","Storn_BR","TotsGG","Tomi8170","Saleme_69","TwitchKausYT","Xands__","Come Come","P3dro_013"]
};
let jogadoresOriginais = JSON.parse(JSON.stringify(jogadores));
let confirmados={};

// ===================== ATUALIZA√á√ÉO TABELA =====================
function atualizarTabela(){
  const tbody = document.getElementById("tabelaBody");
  tbody.innerHTML="";
  let classificacao=1;
  const pontosOrd = Object.keys(jogadores).map(Number).sort((a,b)=>b-a);
  for(let p of pontosOrd){
    for(let nick of jogadores[p]){
      const tr = document.createElement("tr");
      tr.className = (classificacao<=32)?"top32":"";
      tr.setAttribute("data-nick",nick.toUpperCase());
      tr.innerHTML=`<td>${classificacao}¬∫</td>
        <td>${nick}</td>
        <td>${p}</td>
        <td><input type="checkbox" ${confirmados[nick]?"checked":""} onchange="confirmados['${nick}']=this.checked"></td>
        <td><button onclick="removerJogador('${nick}')">‚ùå</button></td>`;
      tbody.appendChild(tr);
      classificacao++;
    }
  }
}

// ===================== JOGADORES =====================
function removerJogador(nick){
  for(let p in jogadores){
    jogadores[p]=jogadores[p].filter(j=>j!==nick);
  }
  atualizarTabela();
}

function adicionarJogador(){
  const nick = padronizarNick(document.getElementById("novoNick").value);
  const pontos = Number(document.getElementById("pontosIniciais").value);
  if(nick.length>0){
    if(!jogadores[pontos]) jogadores[pontos]=[];
    jogadores[pontos].push(nick);
    document.getElementById("novoNick").value="";
    atualizarTabela();
  }
}

function scrollToSection(id){document.getElementById(id).scrollIntoView({behavior:'smooth'});}
function savePoints(){jogadoresOriginais=JSON.parse(JSON.stringify(jogadores)); alert("‚úÖ Pontos salvos!");}
function resetPoints(){jogadores=JSON.parse(JSON.stringify(jogadoresOriginais)); atualizarTabela(); alert("üîÑ Pontos reiniciados!");}

// ===================== PESQUISA =====================
function pesquisar(inputId, containerId){
  const search = document.getElementById(inputId).value.trim().toUpperCase();
  const container = document.getElementById(containerId);
  const itens = container.querySelectorAll('[data-nick]');
  let found=false;
  for(let i=0;i<itens.length;i++){
    const nickUpper = itens[i].dataset.nick.toUpperCase();
    if(nickUpper.startsWith(search)){
      itens[i].scrollIntoView({behavior:'smooth'});
      itens[i].classList.add("highlight");
      setTimeout(()=>{itens[i].classList.remove("highlight");},2000);
      found=true;
      break;
    }
  }
  if(!found) alert("‚ùå Jogador n√£o encontrado!");
}

// ===================== RODADAS =====================
let rodadaAtual=[];
function sortearRodadas(){
  rodadaAtual=[];
  const pontosRodada = Number(document.getElementById("tipoRodada").value);
  const pontosOrd = Object.keys(jogadores).map(Number).sort((a,b)=>b-a);
  
  let pares = [];
  for(let p of pontosOrd){
    let lista = [...jogadores[p]];
    lista.sort(()=>Math.random()-0.5);
    while(lista.length>0){
      let j1 = lista.shift();
      let j2=null;
      if(lista.length>0){
        j2 = lista.shift();
      } else {
        // busca jogador de ponto pr√≥ximo
        let achou=false;
        for(let dif=1;dif<=4;dif++){
          if(!achou){
            if(jogadores[p-dif] && jogadores[p-dif].length>0){
              j2 = jogadores[p-dif][0];
              achou=true;
            } else if(jogadores[p+dif] && jogadores[p+dif].length>0){
              j2 = jogadores[p+dif][0];
              achou=true;
            }
          }
        }
      }
      if(j2){
        pares.push([j1,j2,pontosRodada]);
      } else {
        pares.push([j1,null,pontosRodada]);
      }
    }
  }
  gerarRodada(pares);
}

function gerarRodada(pares){
  const container=document.getElementById("rodadaArea");
  container.innerHTML="";
  rodadaAtual=pares;
  pares.forEach((p,i)=>{
    const div=document.createElement("div");
    div.className="match-card";
    div.setAttribute("data-nick",p[0].toUpperCase());
    let content=`${p[0]} vs ${p[1] ? p[1] : '<span class="espera">Aguardando</span>'}`;
    if(p[1]){
      content+=`<br><button onclick="registrarVitoria(${i},0)">üèÜ Vit√≥ria ${p[0]}</button>
                <button onclick="registrarVitoria(${i},1)">üèÜ Vit√≥ria ${p[1]}</button>
                <div class="resultado" id="res-${i}"></div>`;
    }
    div.innerHTML=content;
    container.appendChild(div);
  });
}

function registrarVitoria(index, vencedor){
  const [j1,j2,pontos] = rodadaAtual[index];
  if(vencedor===0 && j2){
    adicionarPontos(j1,pontos);
    document.getElementById(`res-${index}`).innerText=`‚úÖ ${j1} GANHOU de ${j2}`;
  } else if(vencedor===1){
    adicionarPontos(j2,pontos);
    document.getElementById(`res-${index}`).innerText=`‚úÖ ${j2} GANHOU de ${j1}`;
  }
  atualizarTabela();
}

function adicionarPontos(nick,pontos){
  for(let p in jogadores){
    if(jogadores[p].includes(nick)){
      jogadores[p]=jogadores[p].filter(j=>j!==nick);
      let np = Number(p)+pontos;
      if(!jogadores[np]) jogadores[np]=[];
      jogadores[np].push(nick);
      break;
    }
  }
}

atualizarTabela();
</script>
</body>
</html>
